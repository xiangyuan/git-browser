<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ repo_name }} - Commit</title>
    <link rel="stylesheet" href="/statics/style.css?v=4">
    <link rel="stylesheet" href="/statics/highlight.css">
    <link rel="stylesheet" href="/statics/highlight-dark.css">
    <script src="/statics/app.js?v=4" defer></script>
</head>
<body data-repo-name="{{ repo_name }}">
    <header>
        <h1><a href="/">index</a> : {{ repo_name }}</h1>
    </header>
    
    <!-- Global Branch Comparison Selector -->
    <div class="branch-selector-toolbar">
        <form action="/{{ repo_name }}/diff-beta" method="get" class="branch-selector-form">
            <span class="branch-selector-label">ðŸ”€ Compare branches:</span>
            <select id="from-branch" name="o" class="branch-selector-select">
                {% for branch in all_branches %}
                <option value="{{ branch }}">{{ branch }}</option>
                {% endfor %}
            </select>
            <span class="branch-selector-arrow">â†’</span>
            <select id="to-branch" name="n" class="branch-selector-select">
                {% for branch in all_branches %}
                <option value="{{ branch }}">{{ branch }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn-compare">Compare</button>
            <button type="button" onclick="swapBranches()" class="btn-swap">â‡„ Swap</button>
        </form>
    </div>
    
    <nav>
        <a href="/{{ repo_name }}/summary">summary</a>
        <a href="/{{ repo_name }}/log">log</a>
        <a href="/{{ repo_name }}/commit" class="active">commit</a>
    </nav>
    <main>
        <h2>Commit {{ commit.sha[..8] }}</h2>
        <table class="commit-info">
            <tr><th>Author</th><td>{{ commit.author_name }} &lt;{{ commit.author_email }}&gt;</td><td>{{ commit.author_time }}</td></tr>
            <tr><th>Committer</th><td>{{ commit.committer_name }} &lt;{{ commit.committer_email }}&gt;</td><td>{{ commit.committer_time }}</td></tr>
            <tr><th>Commit</th><td colspan="2">{{ commit.sha }}</td></tr>
            <tr><th>Tree</th><td colspan="2">{{ commit.tree }}</td></tr>
            {% for parent in commit.parents %}
            <tr><th>Parent</th><td colspan="2"><a href="?id={{ parent }}">{{ parent }}</a></td></tr>
            {% endfor %}
        </table>
        <h3>Message</h3>
        <pre>{{ commit.message }}</pre>
        <h3>Diff</h3>
        <pre class="diff">{{ commit.diff_stats|safe }}
{{ commit.diff|safe }}</pre>
    </main>
</body>
</html>
